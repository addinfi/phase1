<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MBZ67JM75"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MBZ67JM75');
</script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K4S3PJGH');</script>
<!-- End Google Tag Manager -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Review Faster</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/60/60525.png" type="image/png" />
    <script src="https://js.puter.com/v2/" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        /* Navbar Styles */
        .navbar {
            background: #007BFF;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .navbar-logo {
            display: flex;
            align-items: center;
        }

        .navbar-logo img {
            height: 40px;
            margin-right: 10px;
        }

        .navbar-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .navbar-menu {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        @media (max-width: 768px) {
            .navbar-toggle {
                display: block;
            }

            .navbar-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: #007BFF;
                flex-direction: column;
                padding: 10px;
                gap: 10px;
            }

            .navbar-menu.show {
                display: flex;
            }

            .navbar-menu a {
                width: 100%;
                text-align: center;
                padding: 10px;
            }

            .profile-dropdown {
                width: 100%;
            }

            .profile-content {
                width: 100%;
                position: static;
                margin-top: 10px;
            }
        }

        .navbar-menu a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .navbar-menu a:hover {
            background-color: rgba(255,255,255,0.1);
        }

        /* Navbar Logout Button */
        .navbar-logout {
            background: none;
            border: 1px solid white;
            padding: 8px 16px;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.3s;
        }

        .navbar-logout:hover {
            background-color: rgba(255,255,255,0.1);
        }

        /* Main Content Styles */
        body {
            background-color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
        }

        .container {
            background: #fff;
            padding: 30px;
            width: 90%;
            max-width: 700px;
            margin: 30px auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        h1 {
            color: #007BFF;
            margin-bottom: 20px;
            text-align: center;
        }
        h2{
            color: #6e6e73;
            margin-bottom: 20px;
            text-align: center;
            font-size: 100%;
            margin-top: -3%;
        }

        input,
        button,
        textarea {
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 1rem;
        }

        textarea {
            resize: vertical;
            width: 100%;
            margin: 10px 0;
        }

        button {
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            gap: 10px;
        }

        .form-group label {
            width: 150px;
            font-weight: 500;
            font-size: 1rem;
        }

        .form-group input {
            flex: 1;
        }

        .whatsapp-btn {
            padding: 10px 14px;
            background-color: #25D366;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
        }

        .whatsapp-btn:hover {
            background-color: #1da851;
        }

        .btn-label {
            margin: -8px 0 16px 160px;
            font-size: 0.9rem;
            color: #007BFF;
            
        }
      
        .review-list {
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .review-item {
            background-color: #eee;
            border: 1px solid #ccc;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: left;
            word-wrap: break-word;
        }

        .review-item:hover {
            background-color: #ddd;
        }

        .review-item.selected {
            background-color: #bbb9b9;
            color: #000000;
        }

        .popup {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #007BFF;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            font-size: 16px;
            font-weight: 500;
            z-index: 9999;
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        }

        .modal p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .modal button {
            margin: auto;
            margin-top: 10px;
            width: 100px;
            padding: 10px;
            border-radius: 6px;
            font-size: 16px;
        }

        @media (max-width: 600px) {
            
    body {
        background-color: white;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        color: #333;
    }

    .container {
        background: #fff;
        padding: 30px;
        padding-top: -5%;
        width: 90%;
        max-width: 700px;
        margin: 30px auto;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
    }

    h1 {
        color: #007BFF;
        margin-bottom: 20px;
        text-align: center;
    }

    h2 {
        color: #6e6e73;
        margin-bottom: 20px;
        text-align: center;
        font-size: 100%;
        margin-top: -3%;
    }

    input,
    button,
    textarea {
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 6px;
        box-sizing: border-box;
        font-size: 1rem;
    }

    textarea {
        resize: vertical;
        width: 100%;
        margin: 10px 0;
    }

    button {
        background-color: #007BFF;
        color: white;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    button:hover {
        background-color: #0056b3;
    }

    .form-group {
        display: flex;
        align-items: center;
        margin-bottom: 12px;
        gap: 10px;
        flex-wrap: wrap;
    }

    .form-group label {
        width: 100%;
        font-weight: 500;
        font-size: 1rem;
    }

    .form-group input {
        flex: 1 1 100%;
    }

    .whatsapp-btn {
        padding: 10px 14px;
        background-color: #25D366;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        margin-top: 10px;
    }

    .whatsapp-btn:hover {
        background-color: #1da851;
    }

    .btn-label {
        font-size: 0.9rem;
        color: #007BFF;
        margin: 0 auto 16px auto;
        display: block;
        text-align: center;
    }

    .review-list {
        margin: 20px 0;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .review-item {
        background-color: #eee;
        border: 1px solid #ccc;
        padding: 12px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
        text-align: left;
        word-wrap: break-word;
    }

    .review-item:hover {
        background-color: #ddd;
    }

    .review-item.selected {
        background-color: #bbb9b9;
        color: #000000;
    }

    .popup {
        display: none;
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: #007BFF;
        color: white;
        padding: 15px 25px;
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        font-size: 16px;
        font-weight: 500;
        z-index: 9999;
    }

    .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
    }

    .modal {
        background: white;
        padding: 30px;
        border-radius: 12px;
        max-width: 400px;
        width: 90%;
        text-align: center;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }

    .modal p {
        font-size: 18px;
        margin-bottom: 20px;
    }

    .modal button {
        margin: auto;
        margin-top: 10px;
        width: 100px;
        padding: 10px;
        border-radius: 6px;
        font-size: 16px;
    }

    .action-buttons {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
    }

    @media (max-width: 768px) {
        .form-group {
            flex-direction: column;
            align-items: stretch;
        }

        .form-group label {
            width: 100%;
        }

        .popup {
            right: 10px;
            left: 10px;
            text-align: center;
        }

        .modal {
            padding: 20px;
        }

        .action-buttons {
            flex-direction: column;
        }
    }

   

    input {
        font-family: "Gill Sans";

    }

    button {
        font-family: sans-serif;
    }


        } label{
        font-size: 1rem;
        font-weight: bolder;
        font-family: "Gill Sans";
    }
    input{
            font-family: "Gill Sans"
        }
        button{
            font-family: sans-serif;
        }
        @media (max-width: 768px) {
            .form-group label {
                text-align: center;
                display: block;
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K4S3PJGH"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-logo">
            
            <span style="color: white; font-weight: bold;">Review Faster</span>
        </div>
        <button class="navbar-toggle" onclick="toggleMenu()">
            <i class="fas fa-bars"></i>
        </button>
        <div class="navbar-menu" id="navbarMenu">
            <a href="welcome.html">Home</a>
            <a href="customers.html">Customers Data</a>
            <a href="profile.html">Profile</a>
            <button onclick="logout()" style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </nav>

        <div class="container" style="margin-top: 80px;">
        <h1>Review Faster</h1>
        <h2 > - Powered by Addinfi</h2>
      
        <form id="reviewForm" style="margin-top: 9%;" onsubmit="return false;">
            <div class="form-group">
                <label for="name" style="font-weight: bold;">Customer Name*</label>
                <input type="text" id="name" placeholder="Enter Customer Name" required />
            </div>
            <div class="form-group">
                <label for="whatsapp" style="font-weight: bold;">WhatsApp Number*</label>
                <input type="tel" id="whatsapp" required pattern="\d{10,}" placeholder="Enter Customer WhatsApp Number"
                    title="Please enter at least 10 digits" />

                <button type="button" style="text-align:center; background-color:#159f0e; font-size: 1rem;"
                    class="whatsapp-btn" color onclick="sendGreeting()"><i class="fab fa-whatsapp"></i> Send Greeting</button>
            </div>
            <div class="form-group">
                <label for="service" style="font-weight: bold;">Service Taken </label>
                <input type="text" id="service" placeholder="hair cut, hair color, body spa, etc..." />
            </div>
            <div class="form-group">
                <label for="billAmount" style="font-weight: bold;">Bill Amount</label>
                <input type="number" id="billAmount" placeholder="Enter bill amount" />
            </div>
            <div class="form-group">
                <label for="keywords" style="font-weight: bold;">Keywords (optional)</label>
                <input type="text" id="keywords" placeholder="best salon near me, best salon in nagpur, etc..." />
                <button id="generateBtn" style="font-family: sans-serif;"> <i class="fas fa-sync-alt" style="margin-right: 6px;"></i> Generate Reviews</button>
                <button id="addToDbBtn" style="display: none; background-color: #28a745; font-family: sans-serif;"> <i class="fas fa-database" style="margin-right: 6px;"></i> Add to DB</button>
            </div>
            <div id="spinner"
                style="display:none; text-align:center; color:#007BFF; font-weight:500; margin-top: 10px;">
                ⏳ Generating reviews...
            </div>

        </form>
        <div id="reviews" class="review-list" style="display: flexbox; justify-content: center;"></div>
        <div style="display: flex; justify-content: center; align-items: center; gap: 12px; flex-wrap: wrap;">
            <span>
                <button type="button" id="share_review"
                    style="text-align:center; display: none;  background-color:#159f0e; font-weight:500;"
                    onclick="sendreview()"> <i class="fab fa-whatsapp"></i>  send review</button></span>
            <span>
                <button onclick="showConfirmModal()"><i class="fas fa-location-arrow"></i>   Send Review Page</button></span>
            <span>
                <button onclick="saveCustomerData()" style="background-color: #28a745;">
                    <i class="fas fa-user-plus"></i> Add Customer
                </button>
            </span>
        </div>

        <div id="popup" class="popup">Review request shared successfully!</div>

        <!-- URL Preview Modal -->
        <div id="urlPreviewModal" class="modal-backdrop" style="display: none;">
            <div class="modal">
                <h3>Google Review URL</h3>
                <p style="word-break: break-all;" id="urlPreviewText"></p>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button onclick="openUrl()" style="flex: 1; background: #28a745;">Open URL</button>
                    <button onclick="closeUrlPreview()" style="flex: 1; background: #6c757d;">Close</button>
                </div>
            </div>
        </div>

        <div id="confirmModal" class="modal-backdrop">
            <div class="modal">
                <p>Are you sure you want to share the review request?</p>
                <button onclick="confirmShare()">Yes</button>
                <button onclick="closeConfirmModal()">Cancel</button>
            </div>
        </div>

        <script defer>
            // Load business details
            document.addEventListener('DOMContentLoaded', function() {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (!currentUser) {
                    window.location.href = 'index.html';
                    return;
                }

                if (currentUser.reviewUrl) {
                    document.getElementById('reviewUrl').textContent = currentUser.reviewUrl;
                }
            });

            function toggleMenu() {
                document.getElementById('navbarMenu').classList.toggle('show');
            }

          

            function showUrlPreview() {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                const url = currentUser ? currentUser.reviewUrl : '';
                document.getElementById('urlPreviewText').textContent = url;
                document.getElementById('urlPreviewModal').style.display = 'flex';
            }

            function closeUrlPreview() {
                document.getElementById('urlPreviewModal').style.display = 'none';
            }

            function openUrl() {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                const url = currentUser ? currentUser.reviewUrl : '';
                if (url) {
                    window.open(url, '_blank');
                }
                closeUrlPreview();
            }

            function toggleProfile() {
                document.getElementById('profileDropdown').classList.toggle('show');
            }

            // Close menu when clicking outside
            window.onclick = function(event) {
                if (!event.target.matches('.navbar-toggle') && !event.target.matches('.navbar-toggle *')) {
                    const menu = document.getElementById('navbarMenu');
                    if (menu.classList.contains('show')) {
                        menu.classList.remove('show');
                    }
                }
                if (!event.target.matches('.profile-btn') && !event.target.matches('.profile-btn *')) {
                    const dropdowns = document.getElementsByClassName('profile-content');
                    for (let dropdown of dropdowns) {
                        if (dropdown.classList.contains('show')) {
                            dropdown.classList.remove('show');
                        }
                    }
                }
            }


            function logout() {
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.getElementById("generateBtn").addEventListener("click", generateReviews);
            });

            function sendGreeting() {
                const number = document.getElementById("whatsapp").value.trim();
                if (!number) {
                    alert("Please enter a WhatsApp number.");
                    return;
                }

                const message = encodeURIComponent("👋 Hi! Hope you're doing well. Just sending you a warm greeting from our team!");
                const link = `https://api.whatsapp.com/send?phone=${number}&text=${message}`;
                window.open(link, '_blank');
            }

            // Save customer data to localStorage
            function saveCustomerData() {
                const name = document.getElementById('name').value;
                const whatsapp = document.getElementById('whatsapp').value;
                const service = document.getElementById('service').value;
                const billAmount = document.getElementById('billAmount').value;

                if (!name || !whatsapp) {
                    alert('Please enter customer name and WhatsApp number');
                    return;
                }

                // Get existing customers
                const customers = JSON.parse(localStorage.getItem('customers')) || [];
                
                // Check if WhatsApp number already exists
                const existingCustomer = customers.find(customer => customer.whatsapp === whatsapp);
                if (existingCustomer) {
                    // Show warning message
                    const popup = document.getElementById('popup');
                    popup.style.backgroundColor = '#dc3545';
                    popup.innerHTML = '<i class="fas fa-exclamation-circle" style="margin-right: 8px;"></i> This WhatsApp number already exists in the database!';
                    popup.style.display = 'block';
                    setTimeout(() => {
                        popup.style.display = 'none';
                    }, 3000);
                    return;
                }

                const customerData = {
                    name,
                    whatsapp,
                    service,
                    billAmount,
                    dateAdded: new Date().toISOString()
                };

                customers.push(customerData);
                localStorage.setItem('customers', JSON.stringify(customers));

                // Show success message
                const popup = document.getElementById('popup');
                popup.style.backgroundColor = '#28a745';
                popup.innerHTML = '<i class="fas fa-check-circle" style="margin-right: 8px;"></i> Customer added to database successfully!';
                popup.style.display = 'block';
                setTimeout(() => {
                    popup.style.display = 'none';
                    // Clear form after successful save
                   
                }, 3000);
            }

            async function generateReviews() {
                const addToDbBtn = document.getElementById('addToDbBtn');
                const spinner = document.getElementById('spinner');
                const generateBtn = document.getElementById('generateBtn');
                const reviewShare = document.getElementById("share_review");
                
                spinner.style.display = "block";
                generateBtn.disabled = true;
                generateBtn.innerText = "Generating...";
                
                const form = document.getElementById('reviewForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    spinner.style.display = "none";
                    generateBtn.disabled = false;
                    generateBtn.innerText = "Generate Reviews";
                    return;
                }

                const service = document.getElementById("service").value.trim();
                const keywords = document.getElementById("keywords").value.trim();

                const prompt = `Generate a unique than before dont give everytime i recently visited, positive, human-like review for the service: "${service}" 
                using keywords: "${keywords}". The review should be 50-80 words,
                realistic, and free of quotations or negative content. Make it fast and do not include any headings.`;

                try {
                    const response = await puter.ai.chat(prompt, {
                        model: 'deepseek-chat'
                    });

                    const text = response.message.content;
                    console.log("Raw response from DeepSeek:\n", text);
                    
                    const reviews = text
                        .split(/\n+/)
                        .map(r => r.replace(/^\d+\.\s*/, "").trim())
                        .filter(r => r.length > 10); // Only keep realistic sentences

                    if (reviews.length === 0) {
                        throw new Error("No usable reviews generated");
                    }

                    const reviewsDiv = document.getElementById("reviews");
                    reviewsDiv.innerHTML = "";

                    reviews.slice(0, 1).forEach(review => {
                        const box = document.createElement("div");
                        box.className = "review-item";
                        box.innerText = review;
                        box.onclick = () => box.classList.toggle("selected");
                        reviewsDiv.appendChild(box);
                    });

                    generateBtn.innerText = "Regenerate Reviews";
                    addToDbBtn.style.display = "inline-block";
                    addToDbBtn.onclick = saveCustomerData;
                    reviewShare.style.display = "block";
                } catch (err) {
                    console.error("DeepSeek error:", err);
                    alert("Failed to generate reviews. Please try again.");
                } finally {
                    spinner.style.display = "none";
                    generateBtn.disabled = false;
                }
            }


            function showConfirmModal() {
                document.getElementById("confirmModal").style.display = "flex";
            }

            function closeConfirmModal() {
                document.getElementById("confirmModal").style.display = "none";
            }
            // send review only 
            function sendreview() {
                const name = document.getElementById("name").value;
                const whatsapp = document.getElementById("whatsapp").value;
                const selectedReviews = [...document.querySelectorAll('.review-item.selected')].map(div => div.innerText);
                const messages = [];
                selectedReviews.forEach((r, i) => {
                    messages.push(`${r}`);
                });
                const allTxt = messages.join("\n\n");
                const enc = encodeURIComponent(allTxt);
                const url = `https://api.whatsapp.com/send?phone=${whatsapp}&text=${enc}`;
                window.open(url, '_blank');
            }
            function confirmShare() {
                const name = document.getElementById("name").value;
                const whatsapp = document.getElementById("whatsapp").value;
                const selectedReviews = [...document.querySelectorAll('.review-item.selected')].map(div => div.innerText);

                const messages = [];
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                const reviewUrl = currentUser ? currentUser.reviewUrl : '';

                messages.push(`👋 Hi ${name}, hope you're doing well!`);
                messages.push(`⭐ We'd love to have your feedback on \n🔗 ${reviewUrl}`);

                const allText = messages.join("\n\n");
                const encoded = encodeURIComponent(allText);

                const url = `https://api.whatsapp.com/send?phone=${whatsapp}&text=${encoded}`;
                window.open(url, '_blank');

                document.getElementById("popup").style.display = "block";
                setTimeout(() => {
                    document.getElementById("popup").style.display = "none";
                }, 3000);

                closeConfirmModal();
                document.getElementById("reviewForm").reset();
                document.getElementById("reviews").innerHTML = "";
                document.getElementById("generateBtn").innerText = "Generate Reviews";
            }
        </script>
</body>

</html>
